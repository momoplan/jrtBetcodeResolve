<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="News">
  <resultMap class="com.jrt.model.News" id="ibatorgenerated_ResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 24 10:59:30 CST 2010.
    -->
    <result column="id" jdbcType="BIGINT" property="id" />
    <result column="pubDate" jdbcType="VARCHAR" property="pubDate" />
    <result column="orderId" jdbcType="INTEGER" property="orderId" />
    <result column="userId" jdbcType="VARCHAR" property="userId" />
    <result column="soruceFrom" jdbcType="VARCHAR" property="soruceFrom" />
    <result column="checked" jdbcType="INTEGER" property="checked" />
    <result column="type" jdbcType="VARCHAR" property="type" />
    <result column="categoryId" jdbcType="BIGINT" property="categoryId" />
    <result column="channelId" jdbcType="INTEGER" property="channelId" />
    <result column="title" jdbcType="LONGVARCHAR" property="title" />
    <result column="title2" jdbcType="LONGVARCHAR" property="title2" />
    <result column="content" jdbcType="LONGVARCHAR" property="content" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.jrt.model.News" resultMap="ibatorgenerated_ResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 24 10:59:30 CST 2010.
    -->
    select id, pubDate, orderId, userId, soruceFrom, checked, type, categoryId, channelId, title,
      title2, content
    from News
    where id = #id:BIGINT#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.jrt.model.News">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 24 10:59:30 CST 2010.
    -->
    delete from News
    where id = #id:BIGINT#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.jrt.model.News">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 24 10:59:30 CST 2010.
    -->
    insert into News (id, pubDate, orderId, userId, soruceFrom, checked, type, categoryId,
      channelId, title, title2, content)
    values (#id:BIGINT#, #pubDate:VARCHAR#, #orderId:INTEGER#, #userId:VARCHAR#,
      #soruceFrom:VARCHAR#, #checked:INTEGER#, #type:VARCHAR#, #categoryId:BIGINT#,
      #channelId:INTEGER#, #title:LONGVARCHAR#, #title2:LONGVARCHAR#, #content:LONGVARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.jrt.model.News">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 24 10:59:30 CST 2010.
    -->
    insert into News
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        id
      </isNotNull>
      <isNotNull prepend="," property="pubDate">
        pubDate
      </isNotNull>
      <isNotNull prepend="," property="orderId">
        orderId
      </isNotNull>
      <isNotNull prepend="," property="userId">
        userId
      </isNotNull>
      <isNotNull prepend="," property="soruceFrom">
        soruceFrom
      </isNotNull>
      <isNotNull prepend="," property="checked">
        checked
      </isNotNull>
      <isNotNull prepend="," property="type">
        type
      </isNotNull>
      <isNotNull prepend="," property="categoryId">
        categoryId
      </isNotNull>
      <isNotNull prepend="," property="channelId">
        channelId
      </isNotNull>
      <isNotNull prepend="," property="title">
        title
      </isNotNull>
      <isNotNull prepend="," property="title2">
        title2
      </isNotNull>
      <isNotNull prepend="," property="content">
        content
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        #id:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="pubDate">
        #pubDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderId">
        #orderId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="soruceFrom">
        #soruceFrom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="checked">
        #checked:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="type">
        #type:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="categoryId">
        #categoryId:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="channelId">
        #channelId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="title">
        #title:LONGVARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="title2">
        #title2:LONGVARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="content">
        #content:LONGVARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.jrt.model.News">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 24 10:59:30 CST 2010.
    -->
    update News
    <dynamic prepend="set">
      <isNotNull prepend="," property="pubDate">
        pubDate = #pubDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderId">
        orderId = #orderId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        userId = #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="soruceFrom">
        soruceFrom = #soruceFrom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="checked">
        checked = #checked:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="type">
        type = #type:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="categoryId">
        categoryId = #categoryId:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="channelId">
        channelId = #channelId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="title">
        title = #title:LONGVARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="title2">
        title2 = #title2:LONGVARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="content">
        content = #content:LONGVARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:BIGINT#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.jrt.model.News">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 24 10:59:30 CST 2010.
    -->
    update News
    set pubDate = #pubDate:VARCHAR#,
      orderId = #orderId:INTEGER#,
      userId = #userId:VARCHAR#,
      soruceFrom = #soruceFrom:VARCHAR#,
      checked = #checked:INTEGER#,
      type = #type:VARCHAR#,
      categoryId = #categoryId:BIGINT#,
      channelId = #channelId:INTEGER#,
      title = #title:LONGVARCHAR#,
      title2 = #title2:LONGVARCHAR#,
      content = #content:LONGVARCHAR#
    where id = #id:BIGINT#
  </update>
  
  <!-- 根据新闻id查询内容 -->
  <select id="selectNewsById" parameterClass="com.jrt.model.News" resultClass="com.jrt.model.News">
     select * from news.News where id=#id:BIGINT# and checked=0 and type=#type:VARCHAR#
  </select>
  <!-- 根据新闻类型查询共多少条新闻 -->
  <select id="getNewsCount" parameterClass="com.jrt.model.News" resultClass="int">
    select count(*) from news.News where categoryId=#categoryId:BIGINT# and checked=0 and type=#type:VARCHAR#
  </select>
  
  <!-- 根据新闻id查询新闻具体内容降序排列-->
   <select id="getNewsListByPubDateDesc" parameterClass="java.util.Map" resultClass="com.jrt.model.News">
      select * from news.News where categoryId= #categoryId:BIGINT# and checked=0 and type=#type:VARCHAR#
      and pubDate &lt; NOW() order by pubDate desc limit #startRow:INTEGER#, #pageSize:INTEGER#
   </select>
   
    <!-- 根据新闻id查询新闻具体内容升序排列-->
   <select id="getNewsListByPubDateAsc" parameterClass="java.util.Map" resultClass="com.jrt.model.News">
      select * from news.News where categoryId= #categoryId:BIGINT# and checked=0 and type=#type:VARCHAR#
      and pubDate &lt; NOW() order by pubDate limit #startRow:INTEGER#,#pageSize:INTEGER#
   </select>
   
   
     <!--  
  <select id="" parameterClass="" resultClass="">
    SELECT * FROM News.news WHERE  id=#id:BIGINT# and checked=0 and type=#type:VARCHAR#
    or id in(SELECT id FROM News.news WHERE 频道父频道ID IN(SELECT 频道ID FROM 频道表 WHERE 频道父频道ID='指定的频道表ID') )    
  </select>-->
   
   <!-- 查询所有新闻内容 --> 
    <select id="selectNewsCount"  parameterClass="com.jrt.util.ListRange" resultClass="int">
      SELECT  count(*) FROM News 
      <dynamic prepend="where">     
         <isNotEmpty prepend="AND" property="query.categoryId">
              categoryId=#query.categoryId#
         </isNotEmpty>
         <isNotEmpty prepend="AND" property="query.checked">
             checked=0
         </isNotEmpty>
         <isNotEmpty prepend="AND" property="query.type">
             type=#query.type#
         </isNotEmpty>
         <isNotEmpty prepend="AND" property="query.pubDate">
             pubDate &lt; NOW()
         </isNotEmpty>
      </dynamic>
   </select>
   <select id="selectNewsList" parameterClass="com.jrt.util.ListRange" resultClass="java.util.HashMap">
       select * from News
  		<dynamic prepend="where">
			<isNotEmpty prepend="AND" property="query.categoryId">
              categoryId=#query.categoryId#
	         </isNotEmpty>
	         <isNotEmpty prepend="AND" property="query.checked">
	             checked=0
	         </isNotEmpty>
	         <isNotEmpty prepend="AND" property="query.type">
	             type=#query.type#
	         </isNotEmpty>
	         <isNotEmpty prepend="AND" property="query.pubDate">
	             pubDate &lt; NOW()
	         </isNotEmpty>
		</dynamic> order by $query.orderId$ desc, pubDate $query.sortPubDate$ limit #startrow#,#pageSize#
		
  </select>
  

</sqlMap>